# プロトタイプアーキテクチャ定義書　レビュー

## 全体的に
武田さんの資料と大木の資料で「用語」を統一しておく。

武田さん資料の４章「検証環境の構成」に挙げられた具体的なテクノロジは、大木の資料「全体アーキテクチャ」と対になるもの。
見せ方は考えた方がいいかもしれない。

## レビュー観点
アーキテクチャ定義書を以下の観点でレビューします

### カバーする領域
+ 配備モデル（ネットワーク及びアプリケーションサーバ、そしてそれらがどのように強調動作するか、システムのトポロジー、サポートするWebブラウザなど）
+ パッケージ／コンポーネントモデル（異なる層／コンポーネントへの関心事の分離）
+ データモデル

### 要求事項・ビジネスの側面からの要件

### クケーラビリティ・セキュリティ・可溶性

### テストに関する記述

### システム間連携に関する記述


-----

## 背景・目的
**文書の修正**
これまでIT本部にて構築してきたシステムは、想定利用者が限定的でありまた相互接続するシステムも限られていたことから、そのインタフェースについても限定的な利用を想定して準備しておけばよかった。
一方、東京ガスが今後取り組むべきBtoC分野におけるシステムは、これまで構築してきたシステムとは全く異な李、その要件として次のようなことが挙げられる。
* 利用ユーザー数が・・・（原文のままでOK）
* APIは利用しやすい形式で公開しなければならない。・・・
* フロントエンドとバックエンドを疎結合化しなければならない・・・

> ここは、表現を「〜すべきである」の方がいいのか？それとも「〜しなければならない」の方がいいのか？

本定義書は上記要件を踏まえ、プロトタイプアプリケーションのアーキテクチャを定義する。

> 「プロトタイプアーキテクチャ」というと、「アーキテクチャのプロトタイプ」に聞こえる・・・（例：プロトタイプガンダム　など）

## はじめに
**今は書かれてない章**

ここに、アーキテクトとして、このプロトタイプアプリケーションに対する、想い・思想を描いて欲しい。
このアプリケーションに対して、「私はアーキテクトとしてこうしたい！こうする！これが辞書だ！」ということを、ツラツラと描いていて欲しい。
これが、今後のすべての思想（実装する担当者すべてに影響を及ぼす）となるからだ。

例えば・・・

「本アプリケーションで採用するアーキテクチャは、今後当社がマイクロサービスを構築する際のリファレンスとして、試験的に定義するものであり、技術的な見地の蓄積のみならず、その技術習得の容易性、適応領域の範囲、粒度に関するトライアンドエラーなどの検証を含む。」
「マイクロサービス検証を行うにあたっては現在の技術標準(JavaEE)ではない言語であるSpring Bootを採用する。また、言語特性による差異を検証する目的から、技術標準であるAIOn.Web.backendによるものリシックサービムも実装する。」
「今回のアーキテクチャを決定する上で、二義的な目的として当グループに在籍するエンジニアのスキルアップを重視する」

など・・・大木が言いたいことをここで言っておく！

-----

## プロトタイプアプリの位置付け
プロトタイプアプリケーションは、アーキテクトチームが検討しているアーキテクチャを実現するためのアプリであり、以下を検証することを目的としたアプリである。

1. サービス情報基盤の上で稼働するアプリケーションのアーキテクチャ検証
2. フロントエンドとAPIをつなぐBFFの有用性および技術特性に関する検証
3. Docker
・・・
などなど、なんかなかったっけ？

## 概要
ここは「目的（要件）」「目標（要素）」「手段（アクション）」と、ちゃんと３段階で書かれているのでとても読みやすい。
特に、「〜 APIを介して〜」と言った具体的な技術を挙げて解説してあるので良い。

むしろ、今回のアーキテクチャ検証で試したかった要素技術については、すべてここで語っていても良い。
例えば・・・Docker, microservice, ICONIX手法, Falco, REST（これを前提にする！と何処かで宣言しとかなきゃダメ）

## 全体アーキテクチャおよびプロトタイプアプリの構成

| モデル　| 図 |
| --- | --- |
| 配備モデル | 全体アーキテクチャ　でカバーする |
| パッケージモデル | プロトタイプアプリの構成　でカバーする |
| データモデル | 今回はない |


## 今回の範囲

このページはもう少し前の方がいい？

> 定義している３層の言葉を前のページの図でも使った方がいい

## フロントエンドアプリケーション
表題は「アプリケーション」だが、説明が「BFF」になっている。
まずは軽くフロントエンドアプリケーションについて述べた上で、バックと接続するためにBFFを使うという流れの方がいい。
BFFの特性を示した図もあった方がいい。

## エクスターナルAPI基盤
これ、正式名称？？？
Oracle API Platform Cloud Service を Microsoft Azure の上で動かしている？？
なんか違和感。

## バックエンドアプリケーション
なぜ参照機能はマイクロサービスが適していると考えるのか？この「なぜ」こそがアーキテクトの思想そのもの。

細かいことだけど・・・「〜マイクロサービスでも作成する」というと、「その機能はモノリシックとマイクロサービスの両方で作成することになるけど、あってる？」

同様に「なぜマイクロサービスはSpring Bootなのか？」軽量とは描いてあるが、もう少し、根拠が欲しい。根拠としては「私がやりたい！と思ってる」でも十分な根拠。

「なぜユーザ管理システムはスタブを使う」のか？

## 各ティアの説明
まず「ティア」という言葉が一般的に使ってもわかる？分かるなのならカタカナではなく「Tier」にすべき。
+ （カタカナ表記だと、「ティアー(tier)：層」と、「ティア(tear)：涙」が同じだから・・・）

あと、「各ティアの説明」で解説している内容が「各ティア別のアーキテクチャを定義」しているのであれば、表題もそう書くべき。「説明」と「定義」では根本的に語感が異なる。

## フロントエンドアプリケーション
* 「４項」と「５項」の実現方法がどちらも「BFF」だけだが、それで良い？
* 「５項」に「キャッシュ」という話が突然でくるが、前段のどこにもそれに触れた「図」（概念図・モデル？配置図？）がない。

    キャッシュの概念を入れるのであれば、フロントエンド側のアーキテクチャ図をもう少し細かいレベルで示して挙げた方がいい。

## エクスターナルAPI基盤
* ここはプロトタイプアプリケーションの本文ではないので、その旨は明記した方がいい。（詳しくは、そっちを参照して欲しい的なもの）

スライド18

〜利用可能なAPIを公開、可視化し〜

* 「可視化」以外については具体策が言及されているが、「可視化」については具体策が書いてない。

スライド19

〜性能や運用性を考慮しAPIゲートウェイ上に過度な機能は実装しない。

* 実装しない例が、「〜実現する」となっており、「〜しない（否定）」の例となっていない。


## バックエンドアプリケーション

本層（大表題では「ティア」という言葉を使っているが・・・）とのやりとりは、基本的にステートレスであるため、フロントエンドアプリケーション〜・・・

* 文章が長くて分かりづらい。
* 文章を分ける。
* イメージ図を入れる。

以下のことを考慮し〜

* 「4.運用面」「5.性能」「6.標準化」「7.開発プロセス」について言葉が足りない。
* 例えば、「運用面」では具体的にはどういうことを考慮するのか？
* 「性能」とは具体的には何か？性能に関する優先度はあるか？

    性能と機能とコストと納期は相対関係にある。
    
    アーキテクチャを語る上で、これらの関係性について述べておく必要がある。（読んだ人間が実際に設計する際に、課題になったり、悩んだりするところだから）


## ビジネスロジックアプリケーション

バックエンドアプリケーションとビジネスロジックアプリケーション、さらにフロントエンドアプリケーションの定義（配置・構成）について、まず最初に定義しておく（図示しておく）


コンテナに載せるサービスを適切に分割し、柔軟なサービス起動・停止を実現する。

* 全体定義書ならこのレベルでも良いが、プロトタイプアプリという、具体的な案件レベルのアーキテクチャ設計書であれば、もう1歩踏み込んだ内容まで書く。

* 例えば、「適切なサービス」とはどの粒度か？現時点で唯一絶対解がないのであれば、試験的にこうする、とか何らかの指針を示す。

* かつ、それが「柔軟なサービス起動・停止」という「目的」を達成（これが本当にDocker導入の目的かも含めて）することを書く

同様に、「適切な粒度でサービスを」の「適切」の定義を書く。

